class MouseHandler{constructor(a,b){this.controller=a,this.graphics=b,this.isDraggingScreen,this.dragX=null,this.dragY=null,document.addEventListener("mousedown",this.mousedown.bind(this)),document.addEventListener("touchstart",this.mousedown.bind(this)),document.addEventListener("mouseup",this.mouseup.bind(this)),document.addEventListener("touchend",this.mouseup.bind(this)),document.addEventListener("mousemove",this.mousemove.bind(this)),document.addEventListener("touchmove",this.mousemove.bind(this))}mousedown(a){a.touches&&(a=a.touches[0]),this.dragX=a.clientX,this.dragY=a.clientY;const b=this.controller.getCards();let c=null;for(let d=b.length-1;0<=d;d--){const e=this.graphics.convertRealToVirtualX(a.clientX),f=this.graphics.convertRealToVirtualY(a.clientY);if(b[d].intersects(e,f)){c=b[d];break}}return null==c?this.isDraggingScreen=!0:this.controller.grabCard(c),!1}mousemove(a){if(a.touches&&(a=a.touches[0]),null==this.dragX||null==this.dragY)return;const b=a.clientX-this.dragX,c=a.clientY-this.dragY;if(this.dragX=a.clientX,this.dragY=a.clientY,this.controller.isCardGrabbed()){const a=this.graphics.convertToVirtualScale(b),d=this.graphics.convertToVirtualScale(c);this.controller.moveCard(a,d)}else this.isDraggingScreen&&this.graphics.dragScreen(b,c)}mouseup(){this.controller.releaseCard(),this.dragX=null,this.dragY=null,this.isDraggingScreen=!1}}"undefined"!=typeof module&&(module.exports=MouseHandler);