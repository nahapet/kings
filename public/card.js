class Card{static get WIDTH(){return 154}static get HEIGHT(){return 214}static get SUITES(){return["C","D","H","S"]}static get RANKS(){return["2","3","4","5","6","7","8","9","10","J","Q","K","A"]}constructor(a,b,c,d,e,f,g,h,i){this.id=a,this.rotation=b,this.x=c,this.y=d,this.freed=e,this.rank=f,this.suite=g,this.width=h?h:Card.WIDTH,this.height=i?i:Card.HEIGHT}static from(a){return new Card(a.id,a.rotation,a.x,a.y,a.freed,a.rank,a.suite,a.width,a.height)}getID(){return this.id}getRankAndSuite(){return{rank:this.rank,suite:this.suite}}isRules(){return(""+this.id).startsWith("rules")}getEdges(){var e=Math.sin,f=Math.cos;Number.isInteger(2*this.rotation/Math.PI)&&(this.rotation+=.01);const g=this.height*f(this.rotation),a=this.width*e(this.rotation),b=this.width*f(this.rotation),c=this.height*e(this.rotation),d=this.x-(b+c)/2,h=this.y+(g-a)/2,i=this.x-(c-b)/2,j=this.y+(g+a)/2,k=this.x+(b+c)/2,l=this.y-(g-a)/2,m=this.x+(c-b)/2,n=this.y-(g+a)/2;return{slope1:a/b,slope2:g/c,p1x:d,p1y:h,p2x:i,p2y:j,p3x:k,p3y:l,p4x:m,p4y:n,centerX:(d+k)/2,centerY:(h+l)/2}}intersects(a,b){var c=Math.sign;const d=this.getEdges(),e=c(Math.sin(this.rotation)),f=c(Math.cos(this.rotation));return f*b<f*(a=>a*d.slope1-d.p1x*d.slope1+d.p1y)(a)&&e*b<e*(a=>-a*d.slope2+d.p3x*d.slope2+d.p3y)(a)&&e*b>e*(a=>-a*d.slope2+d.p1x*d.slope2+d.p1y)(a)&&f*b>f*(a=>a*d.slope1-d.p3x*d.slope1+d.p3y)(a)}intersectsCard(a){if(a.id===this.id)return!1;let b=a.getEdges();const c=this.intersects(b.p1x,b.p1y)||this.intersects(b.p2x,b.p2y)||this.intersects(b.p3x,b.p3y)||this.intersects(b.p4x,b.p4y)||this.intersects(b.centerX,b.centerY);if(c)return!0;b=this.getEdges();const d=a.intersects(b.p1x,b.p1y)||a.intersects(b.p2x,b.p2y)||a.intersects(b.p3x,b.p3y)||a.intersects(b.p4x,b.p4y)||a.intersects(b.centerX,b.centerY);return!!d}distanceFromCenter(){return Math.sqrt(this.x*this.x+this.y*this.y)}draw(a,b){let c=this.width,d=this.height;this.freed&&(c*=1.5,d*=1.5),a.save(),a.translate(this.x,this.y),a.rotate(this.rotation),a.translate(-c/2,-d/2),a.drawImage(b,0,0,c,d),a.restore()}}"undefined"!=typeof module&&(module.exports=Card);